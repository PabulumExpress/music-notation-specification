# 乐谱与音乐符号规范

```mermaid
graph TD;
  A-->B;
  A-->C;
  B-->D;
  C-->D;
```

```lilypond
        #(set-default-paper-size "a8")
        \paper {
            paper-height = 30
        }
        \header {
            tagline = ##f
        }
            
        \new Staff <<
            {c''2}
            \\
            {e'2}
            \\
            {c'8}
            \\
            {d'8}
            \\
            {<e'>8}
            \\
            {b''8}
            \\
            {g'8}
            \\
            {f'8}
            \\
            {a'''8}
        >>
```

## 背景与动机
随着现代谱曲软件的发展，代替传统的手写创作和雕版印刷发版方式已经成为趋势。
但由于众多历史包袱，现代谱曲软件与其他相关应用的发展也一直受到限制。
在描述具体问题之前先将使用乐谱的用户进行分类，不同的人群中对应着不同的乐谱展示需求。
* 作曲家
    * 乐谱可重排版
        * 乐谱可由总谱转换为分谱
        * 自动改编，转换为适应任意乐器的乐谱
        * 屏幕自适应
        * 变奏等
    * 辅助作曲
        * 检查乐谱是否可以被正确演奏
* 演奏者
    * 乐谱可重排版
    * 乐谱的技巧部分与音乐部分分离，作为一个可替换的模块
        * 指法，弓法，键盘乐器中的左右手所在的Stave等都可定制
* 观察者
    * 乐谱可重排版
* 开发者
    * 乐谱识别
    * 制定底层数据格式，便于在不同谱曲软件中交换信息

本规范主要解决的问题是如何正确排版一张乐谱。例如如何解决多个声部多个Beam重叠的排版问题。这个规范是以上所有需求的基础。

### 乐谱重排版
考虑到在乐谱中使用不同的music-font，规范的内容不会涉及符号，页面的具体数值。并且只关注乐谱中音乐的部分，不对页面内容的排版如标题，作者做限制。

### 技巧与音乐分离
技巧通常与乐器相关，而音乐本身与乐器无关。为了便于转换为适应任意乐器的乐谱，技巧应该与原始音乐分离。一份特定乐器的乐谱由原始音乐部分加上技巧部分组成。
技巧指的是广义上的技巧，不仅包含表示乐器特有技巧的特定符号还包含在排版上的其他偏好与规则。
例如钢琴乐谱中，原始音乐被分成了左手和右手部分，还出现了刮奏，踏板等乐器特有的符号。
在乐谱转换为其他乐器的乐谱时忽略不能兼容的技巧。

## 兼容性
大部分情况下与常见的五线谱兼容。
